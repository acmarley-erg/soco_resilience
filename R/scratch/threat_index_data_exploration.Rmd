---
title: "threat_index"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
# load packages
library(tidyverse)
library(sf)
library(here)
library(raster)
```

This RMarkdown is an exploration of the data used to create the threat index. The data sources used are listed below:

- **Wildfire Hazard Index:** https://tukmangeospatial.egnyte.com/dl/BKVGCGmqCq
- **SLR and storm surge:** https://ourcoastourfuture.org/hazard-map/

```{r, echo=FALSE}
##### read in the data #####
fire_hazard <- raster::raster(here("data/clean/fire_hazard_index.tif"))
slr_200cm <- read_sf(here("data/clean/fldhazd_slr200_w000/all_fldhazd_slr200_w000.shp"))
slr_200cm_100yr <- read_sf(here("data/clean/fldhazd_slr200_w100/all_fldhazd_slr200_w100.shp"))

```

```{r, echo = FALSE}
#### Get base shapefiles ####
ca_state <- sf::read_sf(here("data/clean/ca_state_boundary/ca_state_boundary.shp"))
sonoma_county <- sf::read_sf(here("data/clean/sonoma_county_boundary/sonoma_county_boundary.shp"))

ggplot() +
  geom_sf(data = ca_state) +
  geom_sf(data = sonoma_county, fill = "red", alpha = 0.5) +
  coord_sf(xlim = c(-124,-122), ylim = c(38,39))
```

### Wildfire Hazard Index
- Range: 1-5 (Low to Extreme)

```{r}
# visualize
plot(fire_hazard)
```

### SLR
- 200 cm and no storm surge
- 200 cm and 100 year storm

```{r}
ggplot() +
  geom_sf(data = ca_state, fill = "white") +
  geom_sf(data = sonoma_county, fill = "light grey") +
  geom_sf(data = slr_200cm_100yr, fill = "blue", color = "blue") +
  geom_sf(data = slr_200cm, fill = "light blue", color = "light blue") +
  coord_sf(xlim = c(-123.8,-122), ylim = c(38,38.9))
```

